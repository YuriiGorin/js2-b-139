<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>var + for + замыкания</title>
    <script>
        window.addEventListener("load", function() {
          //  var i;
            const buttons1 = document.querySelectorAll(".var");
            const buttons2 = document.querySelectorAll(".let");

            // const handler = function() {
            //     alert(i);
            // };

            // for (var i=0; i<buttons1.length; i++) {
            //     buttons1[i].innerHTML += " " + i;
            //     (function(n) {
            //         buttons1[n].addEventListener("click", function() {
            //             alert(n);
            //         });
            //     })(i);
            // }

            const setHandler = function(elem, n) {
                elem.addEventListener("click", function() {
                    alert(n);
                });
            };


            for (var i=0; i<buttons1.length; i++) {
                buttons1[i].innerHTML += " " + i;
                setHandler(buttons1[i], i);
            }

            for (let i=0; i<buttons2.length; i++) {
                buttons2[i].innerHTML += " " + i;
                buttons2[i].addEventListener("click", function() {
                    alert(i);
                });
            }

            alert(i);
        });
    </script>
</head>
<body>
<button class="var">тест var</button>
<button class="var">тест var</button>
<button class="var">тест var</button>
<button class="var">тест var</button>
<button class="var">тест var</button>

<button class="let">тест let</button>
<button class="let">тест let</button>
<button class="let">тест let</button>
<button class="let">тест let</button>
<button class="let">тест let</button>
<button class="let">тест let</button>
<button class="let">тест let</button>
<button class="let">тест let</button>
</body>
</html>
